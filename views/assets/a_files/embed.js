function calculateColorDifference(e,t){var i=function(e){e=e.replace("#","");var t=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16);return{r:t,g:i,b:n}},n=i(e),o=i(t);return Math.max(n.r,o.r)-Math.min(n.r,o.r)+(Math.max(n.g,o.g)-Math.min(n.g,o.g))+(Math.max(n.b,o.b)-Math.min(n.b,o.b))}var WidgetMessageType;!function(e){e[e.IDENTIFY_USER=1]="IDENTIFY_USER",e[e.SEND_CHAT_MESSAGE=2]="SEND_CHAT_MESSAGE",e[e.CLEAR_CHATS=3]="CLEAR_CHATS",e[e.START_CHAT_WITH_FORM=4]="START_CHAT_WITH_FORM",e[e.ON_CHAT_LOADED=5]="ON_CHAT_LOADED",e[e.SET_CUSTOM_FIELDS=6]="SET_CUSTOM_FIELDS",e[e.ON_CHAT_STARTED=7]="ON_CHAT_STARTED",e[e.CHAT_MESSAGE_RECEIVED=8]="CHAT_MESSAGE_RECEIVED",e[e.GO_TO_CHAT_ROOM=9]="GO_TO_CHAT_ROOM",e[e.GO_TO_CHAT_CONTACT_PAGE=10]="GO_TO_CHAT_CONTACT_PAGE",e[e.GO_TO_CHAT_CLOSED_VIEW=11]="GO_TO_CHAT_CLOSED_VIEW",e[e.CLOSE_WIDGET=12]="CLOSE_WIDGET",e[e.SET_CUSTOM_KB_HEADER=13]="SET_CUSTOM_KB_HEADER",e[e.SET_CUSTOM_HOME_PAGE=14]="SET_CUSTOM_HOME_PAGE",e[e.SET_CUSTOM_HERO_HTML=15]="SET_CUSTOM_HERO_HTML"}(WidgetMessageType||(WidgetMessageType={}));var getIdealTextColor=function(e){var t=["#ffffff","#445868"],i=t.reduce(function(t,i){var n=calculateColorDifference(e,i);return n>t.diff?{diff:n,color:i}:t},{diff:0,color:t&&t[0]});return i.color};!function(){var e,t="answers-widget-launcher-container",i="frame-container",n="answers-widget-frame",o=61,a="15px",s="calc(100% - 166px)",r=580,c=function(e,t){for(var i in t)t.hasOwnProperty(i)&&"string"==typeof i&&(e.style[i]=t[i])},d={position:"fixed",top:"0",left:"0",display:"none",width:"100%",height:"100%",transition:"opacity 0.2s ease",backgroundColor:"rgba(0,0,0,0.5)",zIndex:"11",alignItems:"center",justifyContent:"center"},h={border:"0",maxWidth:"80%",maxHeight:"80%"},l={transition:"transform 0.2s ease",position:"absolute",top:"0",left:"0",width:o+"px",height:o+"px"},p={transition:"transform 0.2s ease",position:"absolute",top:"0",left:"0",width:o+"px",height:o+"px",transform:"rotateZ(-45deg)",opacity:"0"},u={width:"100%",height:"100%",border:"0",overflow:"hidden"},g={background:"white",position:"fixed",bottom:"110px",width:"380px",height:s,maxWidth:"calc(100% - 30px)",maxHeight:"625px",minHeight:"150px",boxShadow:"0 2px 24px 0 rgba(0, 0, 0, 0.48)",display:"none",transition:"opacity 0.2s ease, height 0.3s ease",borderRadius:"6px",overflow:"hidden"},f={background:"white",position:"fixed",bottom:"0",top:"0",right:"0",left:"0",display:"none",transition:"opacity 0.2s ease",overflow:"hidden"},y={bottom:"20px",boxSizing:"border-box",cursor:"pointer",fontSize:"25px",position:"fixed",height:o+"px",minWidth:o+"px",maxWidth:o+"px",textAlign:"center",transition:"all .2s ease-out",boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.2)",fill:"currentColor",verticalAlign:"sub",zIndex:"9"},m={position:"fixed",bottom:"0",width:"0",height:"0",zIndex:"999999999"},C={position:"absolute",height:"20px",backgroundColor:"#389eec",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",fontFamily:"sans-serif",lineHeight:"20px",border:"2px solid white",top:"-5px",left:"-5px",padding:"0 7px",display:"none"},T=function(){function e(e){this.baseUrl="",this.radius=15,this.color="",this.textColor="",this.right="",this.left="",this.icon="",this.font={name:"",url:""},this.isLeft=!1,this.articleId="",this.categoryId="",this.isMobile=!1,this.isWasOpen=!1,this.closeIcon='<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<g fill-rule="evenodd">\n\t\t\t\t<path d="M30 27.172l4.378-4.378a1.01 1.01 0 0 1 1.422.006l1.4 1.4a1 1 0 0 1 .006 1.422L32.828 30l4.378 4.378A1.01 1.01 0 0 1 37.2 35.8l-1.4 1.4a1 1 0 0 1-1.422.006L30 32.828l-4.378 4.378A1.01 1.01 0 0 1 24.2 37.2l-1.4-1.4a1 1 0 0 1-.006-1.422L27.172 30l-4.378-4.378A1.01 1.01 0 0 1 22.8 24.2l1.4-1.4a1 1 0 0 1 1.422-.006L30 27.172z"/>\n\t\t\t</g>\n\t\t</svg>',this.unreadMessagesCount=0,this.applySettings(e),this.initializeLauncherElements(),this.initializeFrameContainer(),this.initializeMediaViewer(),this.initializeLauncherIcon(),this.initializeOpenLauncherIcon(),this.initializeCloseLauncherIcon(),this.applyStyleToLauncherContainer(),this.hideFrameContainer()}return e.prototype.initializeLauncherElements=function(){var e=this;this.openLauncherIcon=document.createElement("span"),this.unreadMessagesElement=document.createElement("span"),this.closeLauncherIcon=document.createElement("span"),this.launcherIcon=document.createElement("span"),this.widgetFrame=document.createElement("iframe"),this.frameContainer=document.createElement("div"),this.mediaViewer=document.createElement("div"),this.launcherContainerElement=document.createElement("div"),this.launcherContainerElement.id=t,this.launcherContainerElement.addEventListener("click",function(t){e.handleLauncherClick(t),e.isWasOpen||(e.isWasOpen=!0,e.widgetFrame.contentWindow.postMessage({firstOpen:!0},"*"))}),this.launcherIcon.appendChild(this.openLauncherIcon),this.launcherIcon.appendChild(this.closeLauncherIcon),this.launcherContainerElement.appendChild(this.mediaViewer),this.launcherContainerElement.appendChild(this.launcherIcon),this.launcherContainerElement.appendChild(this.frameContainer),document.body.appendChild(this.launcherContainerElement)},e.prototype.initializeOpenLauncherIcon=function(){var e=this.openLauncherIcon;e.id="open-launcher-icon",c(e,l),c(this.unreadMessagesElement,C),this.updateOpenLauncherIcon()},e.prototype.updateOpenLauncherIcon=function(){var e=this.openLauncherIcon;e.innerHTML=""+this.icon,e.appendChild(this.unreadMessagesElement)},e.prototype.updateCloseLauncherIcon=function(){var e=this.closeLauncherIcon;e.innerHTML=""+this.closeIcon},e.prototype.initializeCloseLauncherIcon=function(){var e=this.closeLauncherIcon;e.id="close-launcher-icon",c(e,p),this.updateCloseLauncherIcon()},e.prototype.updateLauncherIcon=function(){var e=this.launcherIcon;e.style.backgroundColor=""+this.color,e.style.color=""+this.textColor,e.style.borderRadius=this.radius+"px",e.style.right=""+this.right,e.style.left=""+this.left},e.prototype.initializeLauncherIcon=function(){var e=this.launcherIcon;return e.id="launcher-icon",c(e,y),this.updateLauncherIcon(),e},e.prototype.initializeMediaViewer=function(){var e=this,t=this.mediaViewer;t.id="widget-media-viewer",c(t,d);var i=document.createElement("img");return c(i,h),t.appendChild(i),t.addEventListener("click",function(e){e.stopPropagation(),t.style.opacity="0",setTimeout(function(){t.style.display="none"},200)}),window.addEventListener("message",function(n){0===e.baseUrl.indexOf(n.origin)&&n.data.imageSrc&&(i.src=n.data.imageSrc,t.style.display="flex",t.style.opacity="0",setTimeout(function(){t.style.opacity="1"},1))},!1),t},e.prototype.initializeWidgetFrame=function(){var e=this.widgetFrame;return e.id=n,e.src=""+this.baseUrl,e.allowFullscreen=!0,c(e,u),e},e.prototype.initializeFrameContainer=function(){var e=this.frameContainer;if(e.id=i,this.isMobile?c(e,f):c(e,g),this.updateFrameContainer(),!e.innerHTML){var t=this.initializeWidgetFrame();e.appendChild(t)}},e.prototype.updateFrameContainer=function(){var e=this.frameContainer;e.style.right=this.isMobile?"0":this.right,e.style.left=this.isMobile?"0":this.left},e.prototype.hideFrameContainer=function(){this.frameContainer.style.display="none"},e.prototype.applyStyleToLauncherContainer=function(){var e=this.launcherContainerElement;return c(e,m),this.isLeft?e.style.left="0":e.style.right="0",e},e.prototype.handleLauncherClick=function(e){var t=this,i=this.frameContainer,n=this.openLauncherIcon,o=this.closeLauncherIcon,a="none"!==i.style.display;this.widgetFrame.contentWindow.postMessage({isVisible:!a,isTrusted:e.isTrusted},"*"),n&&o&&(a?(i.style.opacity="0",n.style.opacity="1",this.launcherIcon.style.display="block",setTimeout(function(){n.style.transform="rotateZ(0deg) scale(1)",o.style.transform="rotateZ(-45deg)"},1),setTimeout(function(){o.style.opacity="0"},100),setTimeout(function(){i.style.display="none"},200)):(this.unreadMessagesCount=0,this.unreadMessagesElement.style.display="none",i.style.display="block",i.style.opacity="0",o.style.opacity=this.isMobile?"0":"1",n.style.transform="rotateZ(90deg) scale(0)",setTimeout(function(){i.style.opacity="1",o.style.transform="rotateZ(0deg)"},1),setTimeout(function(){n.style.opacity="none",setTimeout(function(){t.launcherIcon.style.display=t.isMobile?"none":"block"},100)},200)))},e.prototype.applySettings=function(e){this.isMobile=E.outerWidth<=r,this.color=e.color,this.textColor=getIdealTextColor(e.color),this.radius=Math.floor(o/2*e.convex),this.isLeft="left"===e.position,this.left=this.isLeft?a:"auto",this.right=e.position&&this.isLeft?"auto":a,this.icon=e.icon?decodeURI(e.icon):"";var t=e.preview?"?preview=true"+(this.isMobile?"&mobile=true":""):this.isMobile?"?mobile=true":"";if(this.baseUrl=""+e.baseUrl+t,this.font=e.font,!this.isWasOpen)if((e.articleId||this.articleId!==e.articleId)&&this.widgetFrame){var i=e.articleId?"/article/"+e.articleId:"";this.widgetFrame.src=""+e.baseUrl+i+t,e.categoryId=""}else if((e.categoryId||this.categoryId!==e.categoryId)&&this.widgetFrame){var n=e.categoryId?"/category/"+e.categoryId:"";this.widgetFrame.src=""+e.baseUrl+n+t,e.articleId=""}this.articleId=e.articleId,this.categoryId=e.categoryId},e.prototype.render=function(e){this.applySettings(e),this.applyStyleToLauncherContainer(),this.updateLauncherIcon(),this.updateOpenLauncherIcon(),this.updateCloseLauncherIcon(),this.updateFrameContainer()},e}(),_=function(){function e(e){var t=this;this.onChatLoadedCallbacks=[],this.didChatLoad=!1,this.onChatStartedCallbacks=[],this.hasChatStarted=!1,this.wasOpen=!1,this.settings=e,this.launcher=new T(e),this.frame=document.getElementById(n);var o=document.getElementById(i);window.addEventListener("message",function(e){var i=E.outerWidth>r;if(0===t.settings.baseUrl.indexOf(e.origin))if(e.data.closeWidget)t.close(),t.frame.src=t.frame.src;else if(i&&e.data.kbHomepageSearchOnlyMode===!0)o.style.height="168px";else if(i&&e.data.kbHomepageSearchOnlyMode===!1)o.style.height=s;else if(e.data.__ansWidget){var n=e.data.__ansWidget.type;switch(n){case WidgetMessageType.ON_CHAT_LOADED:t.didChatLoad=!0,t.onChatLoadedCallbacks.forEach(function(e){return e()});break;case WidgetMessageType.ON_CHAT_STARTED:t.hasChatStarted=!0,t.onChatStartedCallbacks.forEach(function(e){return e()});break;case WidgetMessageType.CHAT_MESSAGE_RECEIVED:var a="none"!==t.launcher.frameContainer.style.display;a||(t.launcher.unreadMessagesCount+=1,t.launcher.unreadMessagesElement.innerText=""+t.launcher.unreadMessagesCount,t.launcher.unreadMessagesElement.style.display="block");break;case WidgetMessageType.CLOSE_WIDGET:t.toggle(!1)}}},!1)}return e.prototype.moveFrame=function(e,t){var i=document.getElementById(t),n=document.getElementById(e);if(n&&i)for(;n.childNodes.length>0;)i.appendChild(n.childNodes[0])},e.prototype.update=function(e){var t=this,i={};Object.keys(this.settings).forEach(function(e){return i[e]=t.settings[e]}),Object.keys(e).forEach(function(t){return i[t]=e[t]}),this.settings=i,this.launcher.render(this.settings),this.frame.contentWindow.postMessage({previewNewSettings:e},"*")},e.prototype.toggle=function(e){var n=document.getElementById(i),o="none"!==n.style.display;if(e!==o){var a=document.getElementById(t);a.onclick?a.onclick():a.click&&a.click()}},e.prototype.injectToElementById=function(e){var t=this;this.onLoad(function(){t.launcher.widgetFrame.contentWindow.postMessage({isVisible:!0},"*"),t.launcher.isWasOpen||(t.launcher.isWasOpen=!0,t.launcher.widgetFrame.contentWindow.postMessage({firstOpen:!0},"*"))}),this.moveFrame(i,e)},e.prototype.ejectFromElementById=function(e){var t=this;this.onLoad(function(){t.launcher.widgetFrame.contentWindow.postMessage({isVisible:!1},"*")}),this.moveFrame(e,i)},e.prototype.onLoad=function(e){this.frame.onload=function(){e&&e()}},e.prototype.goToKbHome=function(){this.frame.contentWindow.postMessage({goToKbHome:!0},"*")},e.prototype.goToContact=function(){this.frame.contentWindow.postMessage({goToContact:!0},"*")},e.prototype.goToChat=function(){this.frame.contentWindow.postMessage({goToChat:!0},"*")},e.prototype.goToArticle=function(e){this.frame.contentWindow.postMessage({goToArticleId:e},"*")},e.prototype.goToCategory=function(e){this.frame.contentWindow.postMessage({goToCategoryId:e},"*")},e.prototype.open=function(){this.toggle(!0)},e.prototype.close=function(){this.toggle(!1)},e.prototype.hide=function(){var e=document.getElementById(t);e.style.display="none"},e.prototype.show=function(){var e=document.getElementById(t);e.style.display="block"},e.prototype.destroy=function(){var e=document.getElementsByTagName("body")[0],i=document.getElementById(t);i&&(e.removeChild(i),delete E.AnswersWidget)},e.prototype.switchModules=function(e){this.frame.contentWindow.postMessage({switchModules:e},"*")},e.prototype.overwriteTransition=function(e){this.frame.contentWindow.postMessage({previewOverwriteTransition:e},"*")},e.prototype.addLabelsOnSubmit=function(e){this.frame.contentWindow.postMessage({labelsOnSubmit:e},"*")},e.prototype.identifyUser=function(e,t){this.frame.contentWindow.postMessage({__ansWidget:{type:WidgetMessageType.IDENTIFY_USER,data:{userData:e,formTitle:t}}},"*")},e.prototype.sendChatMessage=function(e){this.frame.contentWindow.postMessage({__ansWidget:{type:WidgetMessageType.SEND_CHAT_MESSAGE,data:e}},"*")},e.prototype.clearChats=function(e){this.frame.contentWindow.postMessage({__ansWidget:{type:WidgetMessageType.CLEAR_CHATS,data:{endExistingChat:e}}},"*")},e.prototype.beginChatWithForm=function(){this.frame.contentWindow.postMessage({__ansWidget:{type:WidgetMessageType.START_CHAT_WITH_FORM,data:{}}},"*")},e.prototype.goToChatRoom=function(e){this.frame.contentWindow.postMessage({__ansWidget:{type:WidgetMessageType.GO_TO_CHAT_ROOM,data:{previewMode:e}}},"*")},e.prototype.goToChatContactPage=function(){this.frame.contentWindow.postMessage({__ansWidget:{type:WidgetMessageType.GO_TO_CHAT_CONTACT_PAGE,data:{}}},"*")},e.prototype.goToChatClosedView=function(){this.frame.contentWindow.postMessage({__ansWidget:{type:WidgetMessageType.GO_TO_CHAT_CLOSED_VIEW,data:{}}},"*")},e.prototype.onChatLoaded=function(e){this.onChatLoadedCallbacks=this.onChatLoadedCallbacks.concat([e]),this.didChatLoad&&e()},e.prototype.onChatStarted=function(e){this.onChatStartedCallbacks=this.onChatStartedCallbacks.concat([e]),this.hasChatStarted&&e()},e.prototype.setCustomFields=function(e){this.frame.contentWindow.postMessage({__ansWidget:{type:WidgetMessageType.SET_CUSTOM_FIELDS,data:{customFields:e}}},"*")},e.prototype.setCustomKbHeader=function(e){this.frame.contentWindow.postMessage({__ansWidget:{type:WidgetMessageType.SET_CUSTOM_KB_HEADER,data:{headerHtml:e}}},"*")},e.prototype.setCustomHomePage=function(e){this.frame.contentWindow.postMessage({__ansWidget:{type:WidgetMessageType.SET_CUSTOM_HOME_PAGE,data:{homePageHtml:e}}},"*")},e.prototype.addCustomHeroHtml=function(e){this.frame.contentWindow.postMessage({__ansWidget:{type:WidgetMessageType.SET_CUSTOM_HERO_HTML,data:{heroHtml:e}}},"*")},e}(),E=window;try{e=E._testSettings||JSON.parse("{\"baseUrl\":\"https://wix.wixanswers.com/apps/widget/v1/wix/3863877f-d5aa-4b5a-bdaa-357add14f43f/view/en\",\"color\":\"#d9e3f0\",\"font\":{\"name\":\"Roboto\",\"url\":\"https://fonts.googleapis.com/css?family=Roboto\"},\"convex\":1,\"icon\":\"%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%2260%22%20height=%2260%22%20viewBox=%220%200%2060%2060%22%3E%20%3Cpath%20fill-rule=%22evenodd%22%20d=%22M36.36%2022.6c.62%201%20.66%201.42.66%202.23%200%20.72-.13%201.33-.37%201.84-.25.5-.65%201-1%201.33-.37.33-.84.7-1.42%201.1-.7.47-1.13.85-1.52%201.3-.36.48-.6%201.13-.63%201.67%200%20.52-.44.94-1%20.94l-2.02.04c-.55%200-1-.45-1-.82-.17-1.15.14-1.5.4-2.1.27-.56%201.27-2%202.63-2.92%201.36-.93%201.5-1.4%201.5-1.9s-.16-.84-.48-1.1c-.34-.27-.8-.4-1.37-.4-.87%200-1.73.26-2.53.9-.12.08-.6.6-1.18.16-.6-.45-1.47-1.25-2-1.76-.37-.38-.07-.8.13-.98%201.17-1.2%202.9-2.1%205.85-2.1%202.46.02%204.74%201.63%205.36%202.6zm-4.6%2013.13c.5.5.74%201.07.74%201.76%200%20.7-.25%201.26-.74%201.75-.5.5-1.07.73-1.76.73-.7%200-1.27-.25-1.76-.74-.5-.5-.74-1.08-.74-1.78s.25-1.28.74-1.77c.5-.5%201.07-.73%201.76-.73.7%200%201.27.24%201.76.73z%22/%3E%20%3C/svg%3E\",\"position\":\"right\",\"textColor\":\"#445868\",\"articleId\":\"\",\"categoryId\":\"\",\"allowedDomains\":[],\"preview\":false}")}catch(e){}E.AnswersWidget=new _(e),E.addEventListener("message",function(e){var t=e.data;E.AnswersWidget.update(t)})}();